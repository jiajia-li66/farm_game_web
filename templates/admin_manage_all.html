<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>æ•°æ®ç®¡ç†</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-light">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mt-3">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
    <div class="container">
        <h2>ğŸ“‹ ç®¡ç†æ¤ç‰© / ç‰©å“ / æ‘æ°‘</h2>

        <!-- æ¤ç‰©ç®¡ç† -->
        <h4>ğŸŒ± æ¤ç‰©ç®¡ç†</h4>
        <form method="post" action="{{ url_for('admin_manage_all') }}" class="row g-2 mb-3">
            <input type="hidden" name="form_type" value="plant">
            <div class="col"><input class="form-control" name="name" placeholder="åç§°ï¼ˆå”¯ä¸€ï¼‰" required></div>
            <div class="col"><input class="form-control" type="number" name="growth" placeholder="æˆé•¿æ—¶é—´" required></div>
            <div class="col"><input class="form-control" type="number" name="max_water" placeholder="æœ€å¤šæµ‡æ°´" required></div>
            <div class="col"><input class="form-control" type="number" name="effect" placeholder="æ¯æ¬¡å‡å°‘æ—¶é—´" required></div>
            <div class="col"><input class="form-control" type="number" name="yield" placeholder="æ”¶è·é‡" required></div>
            <div class="col"><input class="form-control" type="number" name="price" placeholder="ç§å­ä»·æ ¼" required></div>
            <div class="col-auto"><button class="btn btn-primary">æ–°å¢æ¤ç‰©</button></div>
        </form>
        <table class="table table-sm">
            <thead><tr><th>ID</th><th>åç§°</th><th>æˆé•¿</th><th>æ°´æ¬¡</th><th>æ°´æ•ˆ</th><th>äº§é‡</th><th>å”®ä»·</th><th>æ“ä½œ</th></tr></thead>
            <tbody>
            {% for p in plants %}
                <tr>
                    <td>{{ p.PlantID }}</td><td>{{ p.PlantName }}</td><td>{{ p.BaseGrowthTime }}</td>
                    <td>{{ p.MaxWaterTimes }}</td><td>{{ p.WaterEffectPerTime }}</td><td>{{ p.HarvestYield }}</td>
                    <td>{{ p.SellPrice }}</td>
                    <td>
                        <form method="post" action="{{ url_for('delete_plant', plant_id=p.PlantID) }}">
                            <button class="btn btn-sm btn-outline-danger">åˆ é™¤</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <!-- ç‰©å“ç®¡ç† -->
        <h4>ğŸ“¦ ç‰©å“ç®¡ç†</h4>
        <form method="post" action="{{ url_for('admin_manage_all') }}" class="row g-2 mb-3">
            <input type="hidden" name="form_type" value="item">
            <div class="col"><input class="form-control" name="item_name" placeholder="ç‰©å“åç§°" required></div>
            <div class="col"><input class="form-control" name="item_type" placeholder="ç±»åˆ«" required></div>
            <div class="col"><input class="form-control" name="item_desc" placeholder="æè¿°" required></div>
            <div class="col-auto"><button class="btn btn-primary">æ–°å¢ç‰©å“</button></div>
        </form>
        <table class="table table-sm">
            <thead><tr><th>ID</th><th>åç§°</th><th>ç±»åˆ«</th><th>è¯´æ˜</th><th>æ“ä½œ</th></tr></thead>
            <tbody>
            {% for item in items %}
                <tr>
                    <td>{{ item.ItemID }}</td><td>{{ item.ItemName }}</td>
                    <td>{{ item.ItemType }}</td><td>{{ item.Description }}</td>
                    <td>
                        <form method="post" action="{{ url_for('delete_item', item_id=item.ItemID) }}">
                            <button class="btn btn-sm btn-outline-danger">åˆ é™¤</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <!-- æ‘æ°‘ç®¡ç† -->
        <h4>ğŸ‘¨â€ğŸŒ¾ æ‘æ°‘ç®¡ç†</h4>
        <form method="post" action="{{ url_for('admin_manage_all') }}" class="row g-2 mb-3">
 	   <input type="hidden" name="form_type" value="villager">
   	 <div class="col"><input class="form-control" name="villager_name" placeholder="å§“å" required></div>
  	 <div class="col">
      	<select class="form-select" name="villager_gender" required>
        	<option value="" selected disabled>é€‰æ‹©æ€§åˆ«</option>
        	<option value="ç”·">ç”·</option>
        	<option value="å¥³">å¥³</option>
      	</select>
    	</div>
    	<div class="col"><input class="form-control" name="villager_desc" placeholder="æè¿°" required></div>
    	<div class="col-auto"><button class="btn btn-primary">æ–°å¢æ‘æ°‘</button></div>
	</form>

        <table class="table table-sm">
            <thead><tr><th>ID</th><th>å§“å</th><th>æè¿°</th><th>æ“ä½œ</th></tr></thead>
            <tbody>
            {% for v in villagers %}
                <tr>
                    <td>{{ v.VillagerID }}</td><td>{{ v.VillagerName }}</td><td>{{ v.Description }}</td>
                    <td>
                        <form method="post" action="{{ url_for('delete_villager', villager_id=v.VillagerID) }}">
                            <button class="btn btn-sm btn-outline-danger">åˆ é™¤</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary mt-3">è¿”å›ç®¡ç†å‘˜é¦–é¡µ</a>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
